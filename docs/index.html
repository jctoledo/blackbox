<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackbox - Open Source Vehicle Telemetry</title>
    <meta name="description" content="Open-source GPS + IMU sensor fusion for vehicle dynamics. Track position, velocity, and g-forces in real-time. Built for track days and autocross. $50-100 in parts.">

    <meta property="og:type" content="website">
    <meta property="og:title" content="Blackbox - Open Source Vehicle Telemetry">
    <meta property="og:description" content="GPS + IMU sensor fusion for vehicle dynamics. Lap timer with delta display. $50-100 hardware.">
    <meta property="og:url" content="https://jctoledo.github.io/blackbox/">
    <meta property="og:image" content="https://jctoledo.github.io/blackbox/dashboard-screenshot.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <link rel="canonical" href="https://jctoledo.github.io/blackbox/">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "SoftwareApplication",
        "name": "Blackbox Vehicle Telemetry",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "ESP32-C3",
        "description": "Open-source GPS + IMU sensor fusion firmware for vehicle dynamics tracking with lap timer and mobile dashboard.",
        "url": "https://jctoledo.github.io/blackbox/",
        "downloadUrl": "https://github.com/jctoledo/blackbox/releases",
        "softwareVersion": "0.0.3",
        "dateModified": "2026-02-02",
        "author": {"@type": "Person", "name": "Jose Cruz Toledo"},
        "license": "https://opensource.org/licenses/MIT",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
        "screenshot": "https://jctoledo.github.io/blackbox/dashboard-screenshot.jpg",
        "releaseNotes": "https://github.com/jctoledo/blackbox/releases/tag/v0.0.3",
        "softwareRequirements": "ESP32-C3, WT901 IMU, u-blox GPS module",
        "featureList": [
            "Real-time G-meter with lateral and longitudinal forces",
            "GPS-based lap timer with delta-to-best display",
            "7-state Extended Kalman Filter sensor fusion",
            "200Hz IMU sampling with 25Hz GPS correction",
            "Mobile dashboard via built-in WiFi AP",
            "Track recording with circuit and point-to-point modes",
            "Driving mode detection (IDLE, ACCEL, BRAKE, CORNER)",
            "Zero-velocity updates for drift elimination"
        ],
        "keywords": "vehicle telemetry, lap timer, ESP32, sensor fusion, GPS, IMU, track day, autocross, g-meter"
    }
    </script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0a0a0f;
            --bg-card: #12121a;
            --bg-card-hover: #1a1a24;
            --border: #222230;
            --border-light: #333345;
            --text: #f0f0f5;
            --text-dim: #888898;
            --text-muted: #555565;
            --accent: #3b82f6;
            --accent-glow: rgba(59, 130, 246, 0.12);
            --green: #22c55e;
            --green-glow: rgba(34, 197, 94, 0.12);
            --red: #ef4444;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* Nav */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 16px 24px;
            transition: all 0.2s;
        }
        .nav.scrolled {
            background: rgba(10, 10, 15, 0.9);
            backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border);
        }
        .nav-inner {
            max-width: 1000px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
            color: var(--text);
            font-weight: 600;
            font-size: 17px;
        }
        .nav-logo {
            width: 26px;
            height: 26px;
            background: var(--accent);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .nav-logo svg { width: 14px; height: 14px; color: white; }
        .nav-links {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        .nav-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 13px;
            font-weight: 500;
            transition: color 0.2s;
        }
        .nav-links a:hover { color: var(--text); }
        .nav-cta {
            background: var(--accent);
            color: white !important;
            padding: 8px 14px;
            border-radius: 6px;
        }
        .nav-cta:hover { background: #4b92ff; }

        @media (max-width: 640px) {
            .nav-links a:not(.nav-cta) { display: none; }
        }

        /* Hero */
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 100px 24px 60px;
            background: radial-gradient(ellipse 60% 40% at 50% 0%, rgba(59, 130, 246, 0.08), transparent 60%);
        }
        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 100px;
            font-size: 12px;
            color: var(--text-dim);
            margin-bottom: 24px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .hero h1 {
            font-size: clamp(32px, 6vw, 52px);
            font-weight: 700;
            letter-spacing: -0.03em;
            line-height: 1.1;
            margin-bottom: 16px;
            max-width: 600px;
        }
        .hero-sub {
            font-size: 16px;
            color: var(--text-dim);
            max-width: 440px;
            margin-bottom: 32px;
        }
        .hero-ctas {
            display: flex;
            gap: 12px;
            margin-bottom: 48px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            font-family: inherit;
        }
        .btn svg { width: 16px; height: 16px; }
        .btn-primary { background: var(--accent); color: white; }
        .btn-primary:hover { background: #4b92ff; }
        .btn-secondary {
            background: var(--bg-card);
            color: var(--text);
            border: 1px solid var(--border);
        }
        .btn-secondary:hover { border-color: var(--border-light); }

        /* Price callout */
        .price-hero {
            display: flex;
            align-items: center;
            gap: 32px;
            padding: 20px 32px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .price-item { text-align: center; }
        .price-value {
            font-size: 28px;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
        }
        .price-value.green { color: var(--green); }
        .price-value.dim { color: var(--text-muted); text-decoration: line-through; font-size: 20px; }
        .price-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        .price-vs {
            font-size: 13px;
            color: var(--text-muted);
            padding: 0 12px;
        }

        /* Sections */
        .section {
            padding: 80px 24px;
        }
        .section-inner {
            max-width: 960px;
            margin: 0 auto;
        }
        .section-head {
            text-align: center;
            margin-bottom: 48px;
        }
        .section-head h2 {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.02em;
            margin-bottom: 8px;
        }
        .section-head p {
            color: var(--text-dim);
            font-size: 15px;
        }

        /* Features grid */
        .features {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
        }
        @media (max-width: 800px) { .features { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 520px) { .features { grid-template-columns: 1fr; } }

        .feature {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px;
        }
        .feature-icon {
            width: 36px;
            height: 36px;
            background: var(--accent-glow);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 12px;
        }
        .feature-icon svg { width: 18px; height: 18px; color: var(--accent); }
        .feature-icon.green { background: var(--green-glow); }
        .feature-icon.green svg { color: var(--green); }
        .feature h3 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
        }
        .feature p {
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* Dashboard preview */
        .preview {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
            align-items: center;
        }
        @media (max-width: 700px) {
            .preview { grid-template-columns: 1fr; }
            .preview-phone { order: -1; }
        }
        .preview-text h3 {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        .preview-text p {
            color: var(--text-dim);
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.6;
        }
        .preview-list {
            list-style: none;
        }
        .preview-list li {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 6px 0;
            font-size: 13px;
            color: var(--text-dim);
        }
        .preview-list svg { width: 16px; height: 16px; color: var(--green); flex-shrink: 0; }
        .preview-phone {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 24px;
            padding: 16px;
            max-width: 280px;
            margin: 0 auto;
        }
        .preview-phone img {
            width: 100%;
            border-radius: 12px;
            display: block;
        }

        /* Hardware */
        .hardware-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }
        @media (max-width: 600px) { .hardware-grid { grid-template-columns: repeat(2, 1fr); } }
        .hw-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 20px 12px;
            text-align: center;
        }
        .hw-card svg { width: 28px; height: 28px; color: var(--accent); margin-bottom: 8px; }
        .hw-card h4 { font-size: 13px; font-weight: 600; }
        .hw-card p { font-size: 11px; color: var(--text-muted); }
        .hw-total {
            text-align: center;
            font-size: 14px;
            color: var(--text-dim);
        }
        .hw-total strong {
            color: var(--green);
            font-family: 'JetBrains Mono', monospace;
        }

        /* Delta bar demo */
        .delta-demo {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 24px;
            margin-top: 32px;
        }
        .delta-demo h4 {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 16px;
            text-align: center;
        }
        .delta-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        @media (max-width: 500px) { .delta-row { grid-template-columns: 1fr; } }
        .delta-card {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
        .delta-val {
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .delta-val.ahead { color: var(--green); }
        .delta-val.behind { color: var(--red); }
        .delta-bar {
            height: 6px;
            border-radius: 3px;
            background: var(--border);
            margin-bottom: 8px;
            overflow: hidden;
        }
        .delta-bar-fill {
            height: 100%;
            border-radius: 3px;
        }
        .delta-bar-fill.ahead {
            background: var(--green);
            width: 70%;
            margin-left: auto;
        }
        .delta-bar-fill.behind {
            background: var(--red);
            width: 50%;
        }
        .delta-label { font-size: 12px; color: var(--text-muted); }

        /* Flasher */
        .flasher {
            max-width: 700px;
            margin: 0 auto;
        }
        .flasher-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        @media (max-width: 600px) { .flasher-grid { grid-template-columns: 1fr; } }
        .flasher-panel {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 24px;
        }
        .flasher-panel h3 {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 16px;
        }
        .form-group { margin-bottom: 16px; }
        .form-group label {
            display: block;
            font-size: 12px;
            color: var(--text-dim);
            margin-bottom: 6px;
        }
        select {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-size: 13px;
            font-family: inherit;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
        }
        select:focus { border-color: var(--accent); outline: none; }
        .steps-list {
            list-style: none;
            counter-reset: steps;
        }
        .steps-list li {
            counter-increment: steps;
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            font-size: 12px;
            color: var(--text-dim);
            border-bottom: 1px solid var(--border);
        }
        .steps-list li:last-child { border-bottom: none; }
        .steps-list li::before {
            content: counter(steps);
            width: 20px;
            height: 20px;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: 600;
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
        }
        .status-box {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            margin-bottom: 12px;
            transition: all 0.2s;
        }
        .status-box.connected { border-color: var(--accent); background: var(--accent-glow); }
        .status-box.flashing { border-color: #f59e0b; background: rgba(245, 158, 11, 0.1); }
        .status-box.success { border-color: var(--green); background: var(--green-glow); }
        .status-box.error { border-color: var(--red); background: rgba(239, 68, 68, 0.1); }
        .status-text { font-size: 15px; font-weight: 600; margin-bottom: 2px; }
        .status-subtext { font-size: 12px; color: var(--text-muted); }
        .flash-btn {
            width: 100%;
            padding: 12px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            font-family: inherit;
            cursor: pointer;
        }
        .flash-btn:hover:not(:disabled) { background: #4b92ff; }
        .flash-btn:disabled { opacity: 0.4; cursor: not-allowed; }
        .dev-toggle {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 11px;
            font-family: inherit;
            cursor: pointer;
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-top: 8px;
        }
        .dev-toggle:hover { color: var(--text-dim); }
        .dev-panel { display: none; margin-top: 8px; }
        .dev-panel.active { display: block; }
        .debug-window {
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 4px;
            padding: 8px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 10px;
            max-height: 100px;
            overflow-y: auto;
        }
        .debug-line { padding: 2px 0; color: var(--text-muted); }
        .debug-line.info { color: var(--accent); }
        .debug-line.success { color: var(--green); }
        .debug-line.error { color: var(--red); }

        /* Footer */
        .footer {
            padding: 40px 24px;
            border-top: 1px solid var(--border);
            text-align: center;
        }
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        .footer-links a {
            color: var(--text-muted);
            text-decoration: none;
            font-size: 12px;
        }
        .footer-links a:hover { color: var(--text-dim); }
        .footer p { color: var(--text-muted); font-size: 12px; }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg); }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
    </style>
</head>
<body>
    <nav class="nav" id="nav">
        <div class="nav-inner">
            <a href="/" class="nav-brand">
                <div class="nav-logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </div>
                Blackbox
            </a>
            <div class="nav-links">
                <a href="#features">Features</a>
                <a href="#hardware">Hardware</a>
                <a href="https://github.com/jctoledo/blackbox/blob/main/README.md" target="_blank">Docs</a>
                <a href="https://github.com/jctoledo/blackbox" target="_blank">GitHub</a>
                <a href="#flash" class="nav-cta">Flash</a>
            </div>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-badge">Open Source &middot; MIT License</div>
        <h1>Vehicle telemetry for track days</h1>
        <p class="hero-sub">GPS + IMU sensor fusion on ESP32. G-meter, lap timer with delta, mode detection. No app needed.</p>

        <div class="hero-ctas">
            <a href="#flash" class="btn btn-primary">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                Flash Firmware
            </a>
            <a href="https://github.com/jctoledo/blackbox" target="_blank" class="btn btn-secondary">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                View Source
            </a>
        </div>

        <div class="price-hero">
            <div class="price-item">
                <div class="price-value green">$50-100</div>
                <div class="price-label">Blackbox</div>
            </div>
            <div class="price-vs">vs</div>
            <div class="price-item">
                <div class="price-value dim">$1,000+</div>
                <div class="price-label">Commercial</div>
            </div>
        </div>
    </section>

    <section class="section" id="features">
        <div class="section-inner">
            <div class="section-head">
                <h2>What you get</h2>
                <p>Connect phone to device WiFi, open browser, drive</p>
            </div>

            <div class="features">
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
                    </div>
                    <h3>G-Meter</h3>
                    <p>Real-time lateral and longitudinal g-forces with trail</p>
                </div>
                <div class="feature">
                    <div class="feature-icon green">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                    </div>
                    <h3>Lap Timer</h3>
                    <p>Record tracks, time laps, delta-to-best display</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                    </div>
                    <h3>Mode Detection</h3>
                    <p>IDLE, ACCEL, BRAKE, CORNER, and combined states</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="5" y="2" width="14" height="20" rx="2"/><circle cx="12" cy="18" r="1"/></svg>
                    </div>
                    <h3>Mobile Dashboard</h3>
                    <p>Works in any browser, no app install</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"/><circle cx="12" cy="10" r="3"/></svg>
                    </div>
                    <h3>Position Tracking</h3>
                    <p>7-state Kalman filter, 200Hz IMU, GPS correction</p>
                </div>
                <div class="feature">
                    <div class="feature-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                    </div>
                    <h3>Open Source</h3>
                    <p>MIT license, Rust firmware, modify freely</p>
                </div>
            </div>
        </div>
    </section>

    <section class="section" style="padding-top: 40px;">
        <div class="section-inner">
            <div class="preview">
                <div class="preview-text">
                    <h3>Lap timer with live delta</h3>
                    <p>Record any track by driving it once. Time your laps and see exactly how you compare to your best — updated in real-time as you drive.</p>
                    <ul class="preview-list">
                        <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> 30Hz timing (~33ms precision)</li>
                        <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Circuit and point-to-point tracks</li>
                        <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Session history saved automatically</li>
                        <li><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 6L9 17l-5-5"/></svg> Auto-detects saved tracks nearby</li>
                    </ul>
                    <a href="https://github.com/jctoledo/blackbox/blob/main/docs/LAP_TIMER.md" target="_blank" style="color: var(--accent); font-size: 13px; text-decoration: none;">Full lap timer guide →</a>
                </div>
                <div class="preview-phone">
                    <img src="dashboard-screenshot.jpg" alt="Blackbox Dashboard">
                </div>
            </div>

            <div class="delta-demo">
                <h4>Delta bar shows ahead or behind your best</h4>
                <div class="delta-row">
                    <div class="delta-card">
                        <div class="delta-val ahead">-2.3s</div>
                        <div class="delta-bar"><div class="delta-bar-fill ahead"></div></div>
                        <div class="delta-label">Ahead of best lap</div>
                    </div>
                    <div class="delta-card">
                        <div class="delta-val behind">+1.5s</div>
                        <div class="delta-bar"><div class="delta-bar-fill behind"></div></div>
                        <div class="delta-label">Behind best lap</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="section" id="hardware">
        <div class="section-inner">
            <div class="section-head">
                <h2>What you need</h2>
                <p>Four components, all available online</p>
            </div>

            <div class="hardware-grid">
                <div class="hw-card">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M9 1v3M15 1v3M9 20v3M15 20v3M1 9h3M1 15h3M20 9h3M20 15h3"/></svg>
                    <h4>ESP32-C3</h4>
                    <p>~$5</p>
                </div>
                <div class="hw-card">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="8" width="18" height="8" rx="1"/><path d="M7 8V6a2 2 0 012-2h6a2 2 0 012 2v2M7 16v2M17 16v2M12 8v8"/></svg>
                    <h4>WT901 IMU</h4>
                    <p>~$25</p>
                </div>
                <div class="hw-card">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>
                    <h4>GPS Module</h4>
                    <p>$15-75</p>
                </div>
                <div class="hw-card">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M9 18h6M10 22h4M12 2v1"/><path d="M12 6a6 6 0 016 6c0 3-2 5-3.5 7.5-.4.7-1 1.5-2.5 1.5s-2.1-.8-2.5-1.5C8 17 6 15 6 12a6 6 0 016-6z"/></svg>
                    <h4>WS2812 LED</h4>
                    <p>~$2</p>
                </div>
            </div>

            <p class="hw-total">Total: <strong>$50-100</strong> depending on GPS choice</p>
        </div>
    </section>

    <section class="section" id="flash">
        <div class="flasher">
            <div class="section-head">
                <h2>Flash firmware</h2>
                <p>Directly from your browser — no toolchain needed</p>
            </div>

            <div class="flasher-grid">
                <div class="flasher-panel">
                    <h3>Setup</h3>
                    <div class="form-group">
                        <label>Firmware</label>
                        <select id="project-select">
                            <option value="">Select...</option>
                        </select>
                    </div>
                    <div id="project-info" style="display: none;">
                        <ol class="steps-list">
                            <li>Connect ESP32-C3 via USB</li>
                            <li>Hold BOOT button if needed</li>
                            <li>Click Connect, select port</li>
                            <li>Click Flash</li>
                        </ol>
                    </div>
                </div>

                <div class="flasher-panel">
                    <h3>Status</h3>
                    <div class="status-box" id="status-box">
                        <div class="status-text">Ready</div>
                        <div class="status-subtext">Select firmware to begin</div>
                    </div>
                    <button class="flash-btn" id="flash-button" disabled>Select Firmware</button>
                    <button class="dev-toggle" id="dev-toggle">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                        Debug
                    </button>
                    <div class="dev-panel" id="dev-panel">
                        <div class="debug-window" id="debug-window">
                            <div class="debug-line info">Ready.</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="footer-links">
            <a href="https://github.com/jctoledo/blackbox">GitHub</a>
            <a href="https://github.com/jctoledo/blackbox/blob/main/README.md">README</a>
            <a href="https://github.com/jctoledo/blackbox/blob/main/docs/LAP_TIMER.md">Lap Timer Guide</a>
            <a href="https://github.com/jctoledo/blackbox/blob/main/docs/SENSOR_FUSION.md">Sensor Fusion Guide</a>
            <a href="https://github.com/jctoledo/blackbox/issues">Issues</a>
        </div>
        <p>Open source under MIT License</p>
    </footer>

    <script src="projects-config.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/adam-weber/esp-webflash-toolkit@main/dist/esp-webflash-toolkit.min.js"></script>
    <script>
        const { ESPFlasher } = ESPWebFlash;
        const nav = document.getElementById('nav');
        window.addEventListener('scroll', () => nav.classList.toggle('scrolled', window.scrollY > 50));

        const projectSelect = document.getElementById('project-select');
        const projectInfo = document.getElementById('project-info');
        const flashButton = document.getElementById('flash-button');
        const statusBox = document.getElementById('status-box');
        const devToggle = document.getElementById('dev-toggle');
        const devPanel = document.getElementById('dev-panel');
        const debugWindow = document.getElementById('debug-window');

        let flasher = null;
        const projects = typeof PROJECTS !== 'undefined' ? PROJECTS : {};

        Object.entries(projects).forEach(([id, p]) => {
            const o = document.createElement('option');
            o.value = id;
            o.textContent = p.name;
            projectSelect.appendChild(o);
        });

        projectSelect.addEventListener('change', e => {
            if (e.target.value) {
                const p = projects[e.target.value];
                projectInfo.style.display = 'block';
                flashButton.disabled = false;
                flashButton.textContent = 'Connect Device';
                updateStatus('', 'Ready', 'Click Connect to begin');
                log('Selected: ' + p.name, 'info');
                flasher = new ESPFlasher({ chip: p.chip, firmwareUrl: p.firmwareUrl });
                flasher.addEventListener('log', e => { if (e.detail.level !== 'debug') log(e.detail.message, e.detail.level); });
                flasher.addEventListener('progress', e => updateStatus('flashing', 'Flashing ' + e.detail.percent + '%', e.detail.written + '/' + e.detail.total));
                flasher.addEventListener('connected', e => { updateStatus('connected', 'Connected', e.detail.chipType); flashButton.textContent = 'Flash Firmware'; flashButton.disabled = false; });
                flasher.addEventListener('complete', () => { updateStatus('success', 'Success', 'Unplug and reset device'); flashButton.textContent = 'Done'; flashButton.disabled = false; });
                flasher.addEventListener('error', e => { updateStatus('error', 'Error', e.detail.message); flashButton.disabled = false; flashButton.textContent = 'Retry'; });
            } else {
                projectInfo.style.display = 'none';
                flashButton.disabled = true;
                flashButton.textContent = 'Select Firmware';
                if (flasher) { flasher.dispose(); flasher = null; }
            }
        });

        devToggle.addEventListener('click', () => devPanel.classList.toggle('active'));

        flashButton.addEventListener('click', async () => {
            if (!flasher) return;
            flashButton.disabled = true;
            try {
                if (!flasher.isConnected()) await flasher.connect();
                else await flasher.flash();
            } catch (e) {
                updateStatus('error', 'Error', e.message.includes('imeout') ? 'Hold BOOT and retry' : e.message);
                flashButton.disabled = false;
                flashButton.textContent = 'Retry';
            }
        });

        function updateStatus(s, t, st) {
            statusBox.className = 'status-box ' + s;
            statusBox.innerHTML = '<div class="status-text">' + t + '</div><div class="status-subtext">' + st + '</div>';
        }

        function log(m, type) {
            const d = document.createElement('div');
            d.className = 'debug-line ' + (type || 'info');
            d.textContent = '[' + new Date().toLocaleTimeString() + '] ' + m;
            debugWindow.appendChild(d);
            debugWindow.scrollTop = debugWindow.scrollHeight;
        }

        if (!('serial' in navigator)) {
            updateStatus('error', 'Not Supported', 'Use Chrome/Edge');
            flashButton.disabled = true;
            log('Web Serial not available', 'error');
        }
    </script>
</body>
</html>
